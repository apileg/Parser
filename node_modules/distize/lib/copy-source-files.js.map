{"version":3,"sources":["../src/copy-source-files.ts"],"sourcesContent":["import { basename, resolve } from 'path'\n\nimport { copy, CopyOptions } from './utils/fs'\nimport { glob } from './utils/path'\n\nexport interface CopySourceFilesInterface extends CopyOptions {\n  basePath?: string\n}\n\nexport function copySourceFiles(\n  src: string | string[],\n  dest: string,\n  options: CopySourceFilesInterface = {}\n): Promise<void> {\n  if (!src) {\n    throw new TypeError('Missing source path(or pattern) argument.')\n  }\n  if (!dest) {\n    throw new TypeError('Missing destination directory argument.')\n  }\n\n  const basePath = options.basePath\n    ? resolve(process.cwd(), options.basePath)\n    : process.cwd()\n\n  return glob(src)\n    .then((files) => [...new Set(files.map((file) => resolve(basePath, file)))])\n    .then((files) =>\n      files.reduce(\n        (carry, file) =>\n          carry.then(() => {\n            return copy(file, resolve(basePath, dest, basename(file)), {\n              onCopy: options.onCopy,\n            })\n          }),\n        Promise.resolve()\n      )\n    )\n}\n"],"names":["copySourceFiles","src","dest","options","TypeError","basePath","resolve","process","cwd","glob","then","files","Set","map","file","reduce","carry","copy","basename","onCopy","Promise"],"mappings":"AAAA;;;;QASgBA,eAAe,GAAfA,eAAe;AATG,IAAA,KAAM,WAAN,MAAM,CAAA;AAEN,IAAA,GAAY,WAAZ,YAAY,CAAA;AACzB,IAAA,MAAc,WAAd,cAAc,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;AAM5B,SAASA,eAAe,CAC7BC,GAAsB,EACtBC,IAAY,EAEG;QADfC,OAAiC,GAAjCA,+CAAsC,kBAAF,EAAE;IAEtC,IAAI,CAACF,GAAG,EAAE;QACR,MAAM,IAAIG,SAAS,CAAC,2CAA2C,CAAC,CAAA;KACjE;IACD,IAAI,CAACF,IAAI,EAAE;QACT,MAAM,IAAIE,SAAS,CAAC,yCAAyC,CAAC,CAAA;KAC/D;IAED,IAAMC,QAAQ,GAAGF,OAAO,CAACE,QAAQ,GAC7BC,CAAAA,GAAAA,KAAO,AAAiC,CAAA,SAAhCC,OAAO,CAACC,GAAG,EAAE,EAAEL,OAAO,CAACE,QAAQ,CAAC,GACxCE,OAAO,CAACC,GAAG,EAAE;IAEjB,OAAOC,CAAAA,GAAAA,MAAI,AAAK,CAAA,MAAJR,GAAG,CAAC,CACbS,IAAI,CAAC,SAACC,KAAK;eAAM,mBAAG,IAAIC,GAAG,CAACD,KAAK,CAACE,GAAG,CAAC,SAACC,IAAI;mBAAKR,CAAAA,GAAAA,KAAO,AAAgB,CAAA,SAAfD,QAAQ,EAAES,IAAI,CAAC;SAAA,CAAC,CAAC,CAArD;KAAsD,CAAC,CAC3EJ,IAAI,CAAC,SAACC,KAAK;eACVA,KAAK,CAACI,MAAM,CACV,SAACC,KAAK,EAAEF,IAAI;mBACVE,KAAK,CAACN,IAAI,CAAC,WAAM;gBACf,OAAOO,CAAAA,GAAAA,GAAI,AAET,CAAA,MAFUH,IAAI,EAAER,CAAAA,GAAAA,KAAO,AAAgC,CAAA,SAA/BD,QAAQ,EAAEH,IAAI,EAAEgB,CAAAA,GAAAA,KAAQ,AAAM,CAAA,UAALJ,IAAI,CAAC,CAAC,EAAE;oBACzDK,MAAM,EAAEhB,OAAO,CAACgB,MAAM;iBACvB,CAAC,CAAA;aACH,CAAC;SAAA,EACJC,OAAO,CAACd,OAAO,EAAE,CAClB;KAAA,CACF,CAAA;CACJ"}