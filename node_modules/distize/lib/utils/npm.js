"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.listPackagePaths = listPackagePaths;
var _childProcess = require("child_process");
var RE_NODE_MODULES = /[/\\]node_modules[/\\]/g;
function listPackagePaths() {
    var options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    var command = "npm ls --prod=true --parseable=true --all";
    if (options.devDeps && options.noDeps) {
        command = "npm ls --dev=true --parseable=true --all";
    } else if (options.devDeps) {
        command = "npm ls --parseable=true --all";
    } else if (options.noDeps) {
        return Promise.resolve([]);
    }
    return new Promise(function(resolve, reject) {
        (0, _childProcess).exec(command, {
            cwd: options.cwd
        }, function(err, stdout) {
            if (err) {
                return reject(err);
            }
            var packages = stdout.toString().split("\n").filter(function(line) {
                var matches = line.match(RE_NODE_MODULES);
                return matches && matches.length === 1;
            });
            resolve(packages);
        });
    });
}

//# sourceMappingURL=npm.js.map