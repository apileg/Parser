"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.copyNodeModules = copyNodeModules;
var _path = require("path");
var _fs = require("./utils/fs");
var _npm = require("./utils/npm");
function copyNodeModules(dest) {
    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    if (!dest) {
        throw new TypeError("Missing destination directory argument.");
    }
    var basePath = options.basePath ? (0, _path).resolve(process.cwd(), options.basePath) : process.cwd();
    return (0, _npm).listPackagePaths(options).then(function(pkgAbsPaths) {
        return pkgAbsPaths.reduce(function(carry, pkgAbsPath) {
            return carry.then(function() {
                return (0, _fs).copy(pkgAbsPath, (0, _path).resolve(basePath, dest, pkgAbsPath.slice(pkgAbsPath.indexOf("node_modules"))));
            });
        }, Promise.resolve());
    });
}

//# sourceMappingURL=copy-node-modules.js.map